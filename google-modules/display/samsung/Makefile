M ?= $(shell pwd)

KBASE_PATH_RELATIVE = $(M)

KBUILD_OPTIONS += CONFIG_DRM_SAMSUNG=m
KBUILD_OPTIONS += CONFIG_DRM_SAMSUNG_DECON=y
KBUILD_OPTIONS += CONFIG_DRM_SAMSUNG_DPP=y
KBUILD_OPTIONS += CONFIG_DRM_SAMSUNG_DSI=y
KBUILD_OPTIONS += CONFIG_DRM_SAMSUNG_WB=y
KBUILD_OPTIONS += CONFIG_DRM_SAMSUNG_TUI=y

KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_COMMON=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_EMUL=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_S6E3HC2=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_S6E3FC3=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_S6E3FC3_P10=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_SOFEF01=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_S6E3HC3=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_S6E3HC3_C10=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_SAMSUNG_S6E3HC4=m
KBUILD_OPTIONS += CONFIG_DRM_PANEL_BOE_NT37290=m

EXTRA_CFLAGS += -DCONFIG_DRM_SAMSUNG_DECON=1
EXTRA_CFLAGS += -DCONFIG_DRM_SAMSUNG_DPP=1
EXTRA_CFLAGS += -DCONFIG_DRM_SAMSUNG_DSI=1
EXTRA_CFLAGS += -DCONFIG_DRM_SAMSUNG_WB=1
EXTRA_CFLAGS += -DCONFIG_DRM_SAMSUNG_TUI=1
EXTRA_CFLAGS += -DDYNAMIC_DEBUG_MODULE=1
EXTRA_CFLAGS += -I$(realpath $(KERNEL_SRC)/$(M)/../include)

EXTRA_CFLAGS += -Werror

modules modules_install clean:
	$(MAKE) -C $(KERNEL_SRC) M=$(M) W=1 $(KBUILD_OPTIONS) EXTRA_CFLAGS="$(EXTRA_CFLAGS)" $(@)

